<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
</head>
<body>
    <h1>Register to StreamFusion!</h1>
    <form id="register" action="/api/v1/auth/register" method="post">
        <label for="username">Enter your Username</label>
        <input name="username" id="username">
        <br>
        <label for="email">Enter your Email</label>
        <input name="email" id="email">
        <br>
        <label for="firstName">Enter your firstname</label>
        <input name="firstName" id="firstName">
        <br>
        <label for="lastName">Enter your lastname</label>
        <input name="lastName" id="lastName">
        <br>
        <label for="dateOfBirth">Enter your Birthday</label>
        <input name="dateOfBirth" id="dateOfBirth" type="text" inputmode="numeric">
        <br>
        <label for="password">Enter your Password</label>
        <input name="password" id="password" type="password">
        <br><br>
        <input type="submit" value="Submit">
    </form>
    <iframe name="hiddenFrame" width="0" height="0" style="display: none;"></iframe>

    <script>
        document.getElementById('register').addEventListener('submit', function(event) {
            event.preventDefault();

            let formData = {
                username: document.getElementById('username').value,
                email: document.getElementById('email').value,
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                dateOfBirth: document.getElementById('dateOfBirth').value,
                password: document.getElementById('password').value
            };

            fetch('/api/v1/auth/register', {
                method: 'POST',
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                },
                body: JSON.stringify(formData)
            }).then(function(response) {
                return response.text();
            }).then(function(text) {
                document.getElementsByName('hiddenFrame')[0].contentWindow.document.write(text);
            }).catch(function(error) {
                console.error(error);
            });
        });
    </script>
</body>
</html>