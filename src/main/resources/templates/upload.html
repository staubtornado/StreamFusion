<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload</title>
</head>
<body>
    <h1>Upload</h1>
    <form id="upload-form">
        <input type="file" id="file" name="file" accept="video/*">
        <label for="title"></label>
        <label for="description"></label>
        <br>
        <input type="text" id="title" name="title" placeholder="Title">
        <input type="text" id="description" name="description" placeholder="Description">
        <br>
        <input type="submit" value="Submit">
    </form>

    <script>
        document.getElementById('upload-form').addEventListener('submit', function(event) {
            event.preventDefault();

            let formData = new FormData();
            formData.append('file', document.getElementById('file').files[0]);
            formData.append('title', document.getElementById('title').value);
            formData.append('description', document.getElementById('description').value);

            fetch('/api/v1/video/upload', {
                method: 'POST',
                body: formData
            }).then(function(response) {
                if (!response.ok) {
                    throw Error(response.statusText);
                }
                return response.text();
            }).then(function(id) {
                window.location.href = '/video?id=' + id;
            }).catch(function(error) {
                console.error(error);
            });
        });
    </script>
</body>
</html>